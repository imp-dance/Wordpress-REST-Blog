{"ast":null,"code":"import _defineProperty from\"/Users/hakonunderbakke/Documents/GitHub/react-app-testing/Wordpress-REST-Blog/wordpress-rest-blog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/hakonunderbakke/Documents/GitHub/react-app-testing/Wordpress-REST-Blog/wordpress-rest-blog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/hakonunderbakke/Documents/GitHub/react-app-testing/Wordpress-REST-Blog/wordpress-rest-blog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/hakonunderbakke/Documents/GitHub/react-app-testing/Wordpress-REST-Blog/wordpress-rest-blog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/hakonunderbakke/Documents/GitHub/react-app-testing/Wordpress-REST-Blog/wordpress-rest-blog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/hakonunderbakke/Documents/GitHub/react-app-testing/Wordpress-REST-Blog/wordpress-rest-blog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from\"react\";import\"../App.scss\";import axios from\"axios\";var Header=/*#__PURE__*/function(_React$Component){_inherits(Header,_React$Component);function Header(){var _getPrototypeOf2;var _this;_classCallCheck(this,Header);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Header)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={errorMessage:\"\",showError:false,commentEmail:\"\",commentName:\"\",commentContent:\"\"};_this.onChange=function(event){_this.setState(_defineProperty({},event.target.name,event.target.value));};_this.validateEmail=function(email){// eslint-disable-next-line\nvar re=/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;return re.test(String(email).toLowerCase());};_this.postNewComment=function(){_this.setState({showError:false});var _this$state=_this.state,commentEmail=_this$state.commentEmail,commentName=_this$state.commentName,commentContent=_this$state.commentContent;var data={author_name:commentName,author_email:commentEmail,content:commentContent,post:_this.props.postID};if(_this.props.replyTo!==null){data.parent=_this.props.replyTo;}var config={headers:{\"Content-Type\":\"application/json\"}};// Validate user input\nvar errors=0;var errorMessage=\"\";if(!_this.validateEmail(commentEmail)){errors++;errorMessage=\"Please enter a valid email address\";}if(commentName.length<3){errors++;errorMessage=\"Name needs to be atleast three characters\";}if(commentContent.length<10){errors++;errorMessage=\"Comment needs to be atleast 10 characters\";}if(errors===0){axios.post(\"\".concat(_this.props.WPConfig.siteURL,\"wp-json/wp/v2/comments\"),data,config).then(function(res){return res.data;}).then(function(data){var currentCommentState=_this.props.comments;var newCommentState=data;newCommentState.customStatus=\"pending\";newCommentState=currentCommentState.unshift(newCommentState);_this.setState({comments:newCommentState,commentEmail:\"\",commentName:\"\",commentContent:\"\"});if(_this.props.onUpdate!==null){_this.props.onUpdate(newCommentState);}});}else{_this.setState({showError:true,errorMessage:errorMessage});}};return _this;}_createClass(Header,[{key:\"componentDidMount\",value:function componentDidMount(){}},{key:\"render\",value:function render(){return React.createElement(\"div\",{className:\"comment-poster\",key:9996},this.state.showError&&React.createElement(\"div\",{className:\"comment-poster-error\"},this.state.errorMessage),React.createElement(\"table\",null,React.createElement(\"tbody\",{valign:\"top\"},React.createElement(\"tr\",null,React.createElement(\"td\",null,\"Your email: \"),React.createElement(\"td\",null,React.createElement(\"input\",{type:\"email\",name:\"commentEmail\",onChange:this.onChange,value:this.state.commentEmail}))),React.createElement(\"tr\",null,React.createElement(\"td\",null,\"Your name: \"),React.createElement(\"td\",null,React.createElement(\"input\",{type:\"text\",name:\"commentName\",onChange:this.onChange,value:this.state.commentName}))),React.createElement(\"tr\",null,React.createElement(\"td\",null,\"Comment: \"),React.createElement(\"td\",null,React.createElement(\"textarea\",{name:\"commentContent\",onChange:this.onChange,value:this.state.commentContent}))),React.createElement(\"tr\",null,React.createElement(\"td\",null),React.createElement(\"td\",null,React.createElement(\"button\",{onClick:this.postNewComment},\"Submit comment\"))))));}}]);return Header;}(React.Component);export default Header;","map":{"version":3,"sources":["/Users/hakonunderbakke/Documents/GitHub/react-app-testing/Wordpress-REST-Blog/wordpress-rest-blog/src/components/CommentPoster.js"],"names":["React","axios","Header","state","errorMessage","showError","commentEmail","commentName","commentContent","onChange","event","setState","target","name","value","validateEmail","email","re","test","String","toLowerCase","postNewComment","data","author_name","author_email","content","post","props","postID","replyTo","parent","config","headers","errors","length","WPConfig","siteURL","then","res","currentCommentState","comments","newCommentState","customStatus","unshift","onUpdate","Component"],"mappings":"gyCAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,aAAP,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,GACMC,CAAAA,M,2YAEJC,K,CAAQ,CACNC,YAAY,CAAE,EADR,CAENC,SAAS,CAAE,KAFL,CAGNC,YAAY,CAAE,EAHR,CAINC,WAAW,CAAE,EAJP,CAKNC,cAAc,CAAE,EALV,C,OAORC,Q,CAAW,SAAAC,KAAK,CAAI,CAClB,MAAKC,QAAL,oBACGD,KAAK,CAACE,MAAN,CAAaC,IADhB,CACuBH,KAAK,CAACE,MAAN,CAAaE,KADpC,GAGD,C,OACDC,a,CAAgB,SAAAC,KAAK,CAAI,CACvB;AACA,GAAIC,CAAAA,EAAE,CAAG,yJAAT,CACA,MAAOA,CAAAA,EAAE,CAACC,IAAH,CAAQC,MAAM,CAACH,KAAD,CAAN,CAAcI,WAAd,EAAR,CAAP,CACD,C,OACDC,c,CAAiB,UAAM,CACrB,MAAKV,QAAL,CAAc,CAAEN,SAAS,CAAE,KAAb,CAAd,EADqB,gBAE+B,MAAKF,KAFpC,CAEfG,YAFe,aAEfA,YAFe,CAEDC,WAFC,aAEDA,WAFC,CAEYC,cAFZ,aAEYA,cAFZ,CAGrB,GAAIc,CAAAA,IAAI,CAAG,CACTC,WAAW,CAAEhB,WADJ,CAETiB,YAAY,CAAElB,YAFL,CAGTmB,OAAO,CAAEjB,cAHA,CAITkB,IAAI,CAAE,MAAKC,KAAL,CAAWC,MAJR,CAAX,CAMA,GAAI,MAAKD,KAAL,CAAWE,OAAX,GAAuB,IAA3B,CAAiC,CAC/BP,IAAI,CAACQ,MAAL,CAAc,MAAKH,KAAL,CAAWE,OAAzB,CACD,CACD,GAAIE,CAAAA,MAAM,CAAG,CACXC,OAAO,CAAE,CAAE,eAAgB,kBAAlB,CADE,CAAb,CAGA;AACA,GAAIC,CAAAA,MAAM,CAAG,CAAb,CACA,GAAI7B,CAAAA,YAAY,CAAG,EAAnB,CACA,GAAI,CAAC,MAAKW,aAAL,CAAmBT,YAAnB,CAAL,CAAuC,CACrC2B,MAAM,GACN7B,YAAY,CAAG,oCAAf,CACD,CACD,GAAIG,WAAW,CAAC2B,MAAZ,CAAqB,CAAzB,CAA4B,CAC1BD,MAAM,GACN7B,YAAY,CAAG,2CAAf,CACD,CACD,GAAII,cAAc,CAAC0B,MAAf,CAAwB,EAA5B,CAAgC,CAC9BD,MAAM,GACN7B,YAAY,CAAG,2CAAf,CACD,CACD,GAAI6B,MAAM,GAAK,CAAf,CAAkB,CAChBhC,KAAK,CACFyB,IADH,WAEO,MAAKC,KAAL,CAAWQ,QAAX,CAAoBC,OAF3B,2BAGId,IAHJ,CAIIS,MAJJ,EAMGM,IANH,CAMQ,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAAChB,IAAR,EANX,EAOGe,IAPH,CAOQ,SAAAf,IAAI,CAAI,CACZ,GAAIiB,CAAAA,mBAAmB,CAAG,MAAKZ,KAAL,CAAWa,QAArC,CACA,GAAIC,CAAAA,eAAe,CAAGnB,IAAtB,CACAmB,eAAe,CAACC,YAAhB,CAA+B,SAA/B,CACAD,eAAe,CAAGF,mBAAmB,CAACI,OAApB,CAA4BF,eAA5B,CAAlB,CACA,MAAK9B,QAAL,CAAc,CACZ6B,QAAQ,CAAEC,eADE,CAEZnC,YAAY,CAAE,EAFF,CAGZC,WAAW,CAAE,EAHD,CAIZC,cAAc,CAAE,EAJJ,CAAd,EAMA,GAAI,MAAKmB,KAAL,CAAWiB,QAAX,GAAwB,IAA5B,CAAkC,CAChC,MAAKjB,KAAL,CAAWiB,QAAX,CAAoBH,eAApB,EACD,CACF,CArBH,EAsBD,CAvBD,IAuBO,CACL,MAAK9B,QAAL,CAAc,CAAEN,SAAS,CAAE,IAAb,CAAmBD,YAAY,CAAZA,YAAnB,CAAd,EACD,CACF,C,+FA1EmB,CAAE,C,uCA2Eb,CACP,MACE,4BAAK,SAAS,CAAC,gBAAf,CAAgC,GAAG,CAAE,IAArC,EACG,KAAKD,KAAL,CAAWE,SAAX,EACC,2BAAK,SAAS,CAAC,sBAAf,EAAuC,KAAKF,KAAL,CAAWC,YAAlD,CAFJ,CAIE,iCACE,6BAAO,MAAM,CAAC,KAAd,EACE,8BACE,6CADF,CAEE,8BACE,6BACE,IAAI,CAAC,OADP,CAEE,IAAI,CAAC,cAFP,CAGE,QAAQ,CAAE,KAAKK,QAHjB,CAIE,KAAK,CAAE,KAAKN,KAAL,CAAWG,YAJpB,EADF,CAFF,CADF,CAYE,8BACE,4CADF,CAEE,8BACE,6BACE,IAAI,CAAC,MADP,CAEE,IAAI,CAAC,aAFP,CAGE,QAAQ,CAAE,KAAKG,QAHjB,CAIE,KAAK,CAAE,KAAKN,KAAL,CAAWI,WAJpB,EADF,CAFF,CAZF,CAuBE,8BACE,0CADF,CAEE,8BACE,gCACE,IAAI,CAAC,gBADP,CAEE,QAAQ,CAAE,KAAKE,QAFjB,CAGE,KAAK,CAAE,KAAKN,KAAL,CAAWK,cAHpB,EADF,CAFF,CAvBF,CAiCE,8BACE,8BADF,CAEE,8BACE,8BAAQ,OAAO,CAAE,KAAKa,cAAtB,mBADF,CAFF,CAjCF,CADF,CAJF,CADF,CAiDD,C,oBA9HkBrB,KAAK,CAAC6C,S,EAiI3B,cAAe3C,CAAAA,MAAf","sourcesContent":["import React from \"react\";\nimport \"../App.scss\";\nimport axios from \"axios\";\nclass Header extends React.Component {\n  componentDidMount() {}\n  state = {\n    errorMessage: \"\",\n    showError: false,\n    commentEmail: \"\",\n    commentName: \"\",\n    commentContent: \"\"\n  };\n  onChange = event => {\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  };\n  validateEmail = email => {\n    // eslint-disable-next-line\n    var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    return re.test(String(email).toLowerCase());\n  };\n  postNewComment = () => {\n    this.setState({ showError: false });\n    let { commentEmail, commentName, commentContent } = this.state;\n    let data = {\n      author_name: commentName,\n      author_email: commentEmail,\n      content: commentContent,\n      post: this.props.postID\n    };\n    if (this.props.replyTo !== null) {\n      data.parent = this.props.replyTo;\n    }\n    let config = {\n      headers: { \"Content-Type\": \"application/json\" }\n    };\n    // Validate user input\n    let errors = 0;\n    let errorMessage = \"\";\n    if (!this.validateEmail(commentEmail)) {\n      errors++;\n      errorMessage = \"Please enter a valid email address\";\n    }\n    if (commentName.length < 3) {\n      errors++;\n      errorMessage = \"Name needs to be atleast three characters\";\n    }\n    if (commentContent.length < 10) {\n      errors++;\n      errorMessage = \"Comment needs to be atleast 10 characters\";\n    }\n    if (errors === 0) {\n      axios\n        .post(\n          `${this.props.WPConfig.siteURL}wp-json/wp/v2/comments`,\n          data,\n          config\n        )\n        .then(res => res.data)\n        .then(data => {\n          let currentCommentState = this.props.comments;\n          let newCommentState = data;\n          newCommentState.customStatus = \"pending\";\n          newCommentState = currentCommentState.unshift(newCommentState);\n          this.setState({\n            comments: newCommentState,\n            commentEmail: \"\",\n            commentName: \"\",\n            commentContent: \"\"\n          });\n          if (this.props.onUpdate !== null) {\n            this.props.onUpdate(newCommentState);\n          }\n        });\n    } else {\n      this.setState({ showError: true, errorMessage });\n    }\n  };\n  render() {\n    return (\n      <div className=\"comment-poster\" key={9996}>\n        {this.state.showError && (\n          <div className=\"comment-poster-error\">{this.state.errorMessage}</div>\n        )}\n        <table>\n          <tbody valign=\"top\">\n            <tr>\n              <td>Your email: </td>\n              <td>\n                <input\n                  type=\"email\"\n                  name=\"commentEmail\"\n                  onChange={this.onChange}\n                  value={this.state.commentEmail}\n                />\n              </td>\n            </tr>\n            <tr>\n              <td>Your name: </td>\n              <td>\n                <input\n                  type=\"text\"\n                  name=\"commentName\"\n                  onChange={this.onChange}\n                  value={this.state.commentName}\n                />\n              </td>\n            </tr>\n            <tr>\n              <td>Comment: </td>\n              <td>\n                <textarea\n                  name=\"commentContent\"\n                  onChange={this.onChange}\n                  value={this.state.commentContent}\n                />\n              </td>\n            </tr>\n            <tr>\n              <td></td>\n              <td>\n                <button onClick={this.postNewComment}>Submit comment</button>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    );\n  }\n}\n\nexport default Header;\n"]},"metadata":{},"sourceType":"module"}