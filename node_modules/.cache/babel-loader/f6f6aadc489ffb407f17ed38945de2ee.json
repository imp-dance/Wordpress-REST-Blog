{"ast":null,"code":"import _slicedToArray from\"/Users/hakonunderbakke/Documents/GitHub/react-app-testing/Wordpress-REST-Blog/wordpress-rest-blog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import ReactDOMServer from\"react-dom/server\";import CommentPoster from\"./CommentPoster\";import WPConfig from\"../WordpressConfig\";import\"../App.scss\";var HtmlToReactParser=require(\"html-to-react\").Parser;export var Comment=function Comment(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isReplying=_useState2[0],setReplying=_useState2[1];var showReply=function showReply(){setReplying(!isReplying);};var reactParse=function reactParse(parse){var HTMLToReactParser=new HtmlToReactParser();var reactElement=HTMLToReactParser.parse(parse);return ReactDOMServer.renderToStaticMarkup(reactElement);};var parseDate=function parseDate(date){var y=date.substring(0,4);var m=date.substring(5,7);var d=date.substring(8,10);var h=date.substring(11,13);var min=date.substring(14,16);return\"\".concat(h,\":\").concat(min,\" \").concat(d,\"/\").concat(m,\"/\").concat(y);};var commentWasPosted=function commentWasPosted(newCommentState){if(props.onUpdate!==undefined){props.onUpdate(newCommentState);}setReplying(false);};var name=props.comment.author_name;var body=reactParse(props.comment.content.rendered);var date=parseDate(props.comment.date);var img=props.comment.author_avatar_urls[48];var nestedComments=props.nestedComments;var nestedCommentsArray=[];if(nestedComments.length>=1){nestedComments.forEach(function(comment,index){var allComments=props.allComments;var replyID=comment.id;var moreNestedComments=allComments.filter(function(comment){return comment.parent===replyID;});nestedCommentsArray.push(React.createElement(Comment,{key:index,comment:comment,index:index,onUpdate:commentWasPosted,nestedComments:moreNestedComments,allComments:allComments}));});}var commentClassName=props.comment.customStatus===\"pending\"?\"comment pending\":\"comment\";return React.createElement(\"div\",{className:commentClassName,key:props.index},React.createElement(\"div\",{className:\"comment-header\"},React.createElement(\"img\",{src:img,alt:\"Comment avatar\"}),React.createElement(\"strong\",{className:\"comment-username\"},props.comment.author===1&&React.createElement(\"span\",null,\"\\u2605\"),name),React.createElement(\"em\",null,\"#\",props.comment.id)),React.createElement(\"div\",{className:\"comment-body\",dangerouslySetInnerHTML:{__html:body}}),React.createElement(\"i\",{className:\"comment-date\"},props.comment.customStatus!==\"pending\"&&React.createElement(\"button\",{onClick:showReply},isReplying?\"Cancel\":\"Reply\"),date),isReplying&&React.createElement(CommentPoster,{replyTo:props.comment.id,postID:props.comment.post,onUpdate:commentWasPosted,WPConfig:WPConfig,comments:props.allComments}),nestedComments.length>=1&&React.createElement(\"div\",{className:\"nestedComments\"},nestedCommentsArray));};export default Comment;","map":{"version":3,"sources":["/Users/hakonunderbakke/Documents/GitHub/react-app-testing/Wordpress-REST-Blog/wordpress-rest-blog/src/components/Comment.js"],"names":["React","useState","ReactDOMServer","CommentPoster","WPConfig","HtmlToReactParser","require","Parser","Comment","props","isReplying","setReplying","showReply","reactParse","parse","HTMLToReactParser","reactElement","renderToStaticMarkup","parseDate","date","y","substring","m","d","h","min","commentWasPosted","newCommentState","onUpdate","undefined","name","comment","author_name","body","content","rendered","img","author_avatar_urls","nestedComments","nestedCommentsArray","length","forEach","index","allComments","replyID","id","moreNestedComments","filter","parent","push","commentClassName","customStatus","author","__html","post"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport ReactDOMServer from \"react-dom/server\";\nimport CommentPoster from \"./CommentPoster\";\nimport WPConfig from \"../WordpressConfig\";\nimport \"../App.scss\";\nconst HtmlToReactParser = require(\"html-to-react\").Parser;\n\nexport const Comment = props => {\n  const [isReplying, setReplying] = useState(false);\n  const showReply = () => {\n    setReplying(!isReplying);\n  };\n  const reactParse = parse => {\n    let HTMLToReactParser = new HtmlToReactParser();\n    let reactElement = HTMLToReactParser.parse(parse);\n    return ReactDOMServer.renderToStaticMarkup(reactElement);\n  };\n  const parseDate = date => {\n    let y = date.substring(0, 4);\n    let m = date.substring(5, 7);\n    let d = date.substring(8, 10);\n    let h = date.substring(11, 13);\n    let min = date.substring(14, 16);\n    return `${h}:${min} ${d}/${m}/${y}`;\n  };\n  const commentWasPosted = newCommentState => {\n    if (props.onUpdate !== undefined) {\n      props.onUpdate(newCommentState);\n    }\n    setReplying(false);\n  };\n  let name = props.comment.author_name;\n  let body = reactParse(props.comment.content.rendered);\n  let date = parseDate(props.comment.date);\n  let img = props.comment.author_avatar_urls[48];\n  let nestedComments = props.nestedComments;\n  let nestedCommentsArray = [];\n  if (nestedComments.length >= 1) {\n    nestedComments.forEach((comment, index) => {\n      let allComments = props.allComments;\n      let replyID = comment.id;\n      let moreNestedComments = allComments.filter(\n        comment => comment.parent === replyID\n      );\n      nestedCommentsArray.push(\n        <Comment\n          key={index}\n          comment={comment}\n          index={index}\n          onUpdate={commentWasPosted}\n          nestedComments={moreNestedComments}\n          allComments={allComments}\n        />\n      );\n    });\n  }\n  let commentClassName =\n    props.comment.customStatus === \"pending\" ? \"comment pending\" : \"comment\";\n  return (\n    <div className={commentClassName} key={props.index}>\n      <div className=\"comment-header\">\n        <img src={img} alt=\"Comment avatar\" />\n        <strong className=\"comment-username\">\n          {props.comment.author === 1 && <span>â˜…</span>}\n          {name}\n        </strong>\n        <em>#{props.comment.id}</em>\n      </div>\n\n      <div\n        className=\"comment-body\"\n        dangerouslySetInnerHTML={{ __html: body }}\n      />\n      <i className=\"comment-date\">\n        {props.comment.customStatus !== \"pending\" && (\n          <button onClick={showReply}>{isReplying ? \"Cancel\" : \"Reply\"}</button>\n        )}\n        {date}\n      </i>\n      {isReplying && (\n        <CommentPoster\n          replyTo={props.comment.id}\n          postID={props.comment.post}\n          onUpdate={commentWasPosted}\n          WPConfig={WPConfig}\n          comments={props.allComments}\n        />\n      )}\n      {nestedComments.length >= 1 && (\n        <div className=\"nestedComments\">{nestedCommentsArray}</div>\n      )}\n    </div>\n  );\n};\n\nexport default Comment;\n"]},"metadata":{},"sourceType":"module"}