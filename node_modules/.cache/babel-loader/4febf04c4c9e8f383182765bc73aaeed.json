{"ast":null,"code":"import _classCallCheck from\"/Users/hakonunderbakke/Documents/GitHub/react-app-testing/Wordpress-REST-Blog/wordpress-rest-blog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/hakonunderbakke/Documents/GitHub/react-app-testing/Wordpress-REST-Blog/wordpress-rest-blog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/hakonunderbakke/Documents/GitHub/react-app-testing/Wordpress-REST-Blog/wordpress-rest-blog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/hakonunderbakke/Documents/GitHub/react-app-testing/Wordpress-REST-Blog/wordpress-rest-blog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/hakonunderbakke/Documents/GitHub/react-app-testing/Wordpress-REST-Blog/wordpress-rest-blog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from\"react\";import ReactDOMServer from\"react-dom/server\";import Comment from\"./Comment\";import CommentPoster from\"./CommentPoster\";import\"../App.scss\";import axios from\"axios\";import{Link}from\"react-router-dom\";import{Helmet}from\"react-helmet\";import Loader from\"./Loader\";import{FacebookShareButton,RedditShareButton,LinkedinShareButton,TwitterShareButton,EmailShareButton}from\"react-share\";var HtmlToReactParser=require(\"html-to-react\").Parser;var Articles=/*#__PURE__*/function(_React$Component){_inherits(Articles,_React$Component);function Articles(){var _getPrototypeOf2;var _this;_classCallCheck(this,Articles);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Articles)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={blogPosts:[{id:0,title:{rendered:\"\"},excerpt:{rendered:\"\"},content:{rendered:\"\"},categories:[]}],comments:[{author_name:\"\",content:{rendered:\"\"},author_avatar_urls:{48:\"\"},date:\"\"}],categories:[{name:\"\",id:null}],sortArticles:null,postID:_this.props.postID||false,renderComments:false,commentEmail:\"\",commentName:\"\",commentContent:\"\",commentReply:null};_this.checkForForm=function(){var form=document.querySelector(\".wpforms-form\");if(form!==null){form.setAttribute(\"action\",\"https://impedans.me/\"+form.getAttribute(\"action\"));console.log(\"Updated form\");}};_this.goToArticle=function(event){window.location.href=\"\".concat(_this.props.WPConfig.baseName,\"post/\").concat(event.target.parentElement.getAttribute(\"data-id\"));};_this.sortArticles=function(event){var categoryID=event.target.getAttribute(\"data-categoryid\");_this.setState({sortArticles:categoryID});_this.scrollToTop();};_this.scrollToTop=function(){window.scrollTo(0,0);document.body.scrollTop=0;};_this.reactParse=function(parse){var HTMLToReactParser=new HtmlToReactParser();var reactElement=HTMLToReactParser.parse(parse);var string=ReactDOMServer.renderToStaticMarkup(reactElement);return string.replace(\"<code>\",\"<code class='markUpBaby'>\");};_this.parseDate=function(date){var y=date.substring(0,4);var m=date.substring(5,7);var d=date.substring(8,10);var h=date.substring(11,13);var min=date.substring(14,16);return\"\".concat(h,\":\").concat(min,\" \").concat(d,\"/\").concat(m,\"/\").concat(y);};_this.updateComments=function(newCommentState){_this.setState({newComments:newCommentState});};_this.goToMusic=function(){window.location.href=\"/blog/post/128\";};_this.goToAbout=function(){window.location.href=\"/blog/post/136\";};_this.goToCV=function(){window.open(\"https://haakon.underbakke.net/cv\",\"_blank\");};_this.goToContact=function(){window.location.href=\"https://impedans.me/web/contact-me/\";};_this.ignoreAction=function(event){event.preventDefault();};_this.goHome=function(){window.location.href=\"/articles\";};return _this;}_createClass(Articles,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;if(this.state.postID===false){axios.get(\"\".concat(this.props.WPConfig.siteURL,\"wp-json/wp/v2/posts\")).then(function(res){return res.data;}).then(function(blogPosts){_this2.setState({blogPosts:blogPosts,loaded:true});});axios.get(\"\".concat(this.props.WPConfig.siteURL,\"wp-json/wp/v2/categories\")).then(function(res){return res.data;}).then(function(categories){_this2.setState({categories:categories});});this.scrollToTop();}else{axios.get(\"\".concat(this.props.WPConfig.siteURL,\"wp-json/wp/v2/posts/?include[]=\").concat(this.state.postID)).then(function(res){return res.data;}).then(function(blogPosts){_this2.setState({blogPosts:blogPosts,loaded:true},function(){setTimeout(_this2.checkForForm,1500);});});axios.get(\"\".concat(this.props.WPConfig.siteURL,\"wp-json/wp/v2/comments/?post=\").concat(this.state.postID)).then(function(res){return res.data;}).then(function(comments){_this2.setState({comments:comments});});this.scrollToTop();}}},{key:\"render\",value:function render(){var _this3=this;var render=[];var categoryItems=[];this.state.categories.forEach(function(category,index){if(category.id!==1){categoryItems.push(React.createElement(\"li\",{key:\"art\"+1888+index,\"data-id\":category.id},React.createElement(\"button\",{onClick:_this3.sortArticles,\"data-categoryid\":category.id,className:_this3.state.sortArticles===null||parseInt(_this3.state.sortArticles)===parseInt(category.id)?\"white\":\"gray\"},category.name)));}});if(this.state.postID!==false){categoryItems.push(React.createElement(\"li\",{key:\"fart\"+1923},React.createElement(Link,{to:\"/articles\"},React.createElement(\"button\",null,\"\\u2039 All posts\"))));}/* \n    categoryItems.push(\n      <li key={\"bart\" + 1923} className=\"seperator\">\n        |\n      </li>\n    ); */render.push(React.createElement(\"nav\",{key:\"part\"+9991},React.createElement(\"ul\",null,categoryItems)));this.state.blogPosts.forEach(function(blogPost,index){if(_this3.state.sortArticles===null||blogPost.categories.includes(parseInt(_this3.state.sortArticles))||blogPost.categories===parseInt(_this3.state.sortArticles)){var title=_this3.reactParse(blogPost.title.rendered);var body=_this3.state.postID===false?_this3.reactParse(blogPost.excerpt.rendered):_this3.reactParse(blogPost.content.rendered);if(_this3.state.postID===false){body=body.substring(0,body.length-9)+\"...</p>\";}var className=_this3.state.postID===false?\"collapsed\":\"open\";/*if (index === 0 && this.state.sortArticles === null) {\n          className = \"open\"; // Latest article should be open on index\n          body = this.reactParse(blogPost.content.rendered);\n        }*/if(_this3.state.postID===false&&!blogPost.categories.includes(1)||_this3.state.postID!==false){render.push(React.createElement(\"article\",{key:index,className:className,\"data-id\":blogPost.id},React.createElement(Link,{to:\"/articles/post/\"+blogPost.id,\"data-id\":blogPost.id,className:\"articleLink\"},React.createElement(\"h3\",{\"data-id\":blogPost.id,dangerouslySetInnerHTML:{__html:title}})),_this3.state.postID===false?React.createElement(Link,{to:\"/articles/post/\"+blogPost.id,\"data-id\":blogPost.id,className:\"articleBodyLink\"},React.createElement(\"div\",{className:\"body\",\"data-id\":blogPost.id,dangerouslySetInnerHTML:{__html:body}})):React.createElement(\"div\",{className:\"body\",onClick:_this3.state.postID===false?_this3.goToArticle:function(){},\"data-id\":blogPost.id,dangerouslySetInnerHTML:{__html:body}})));}}});if(this.state.postID!==false){// A specific post is open\nif(this.state.blogPosts[0].title.rendered!==\"\"){var metaDescription=this.reactParse(this.state.blogPosts[0].excerpt.rendered);metaDescription=metaDescription.substring(3);metaDescription=metaDescription.slice(0,-5);var title=this.reactParse(this.state.blogPosts[0].title.rendered);render.push(React.createElement(Helmet,{key:\"123653\"},React.createElement(\"title\",null,title),React.createElement(\"meta\",{name:\"description\",content:metaDescription})));}var parentComments=this.state.comments.filter(function(comment){return comment.parent===0;});var url=window.location.href;render.push(React.createElement(\"h5\",{key:\"aaart\"+9994},\"Share on...\"));render.push(React.createElement(\"div\",{className:\"social\",key:\"arts\"+9993},React.createElement(FacebookShareButton,{url:url},\"Facebook\"),React.createElement(RedditShareButton,{url:url},\"Reddit\"),React.createElement(LinkedinShareButton,{url:url},\"Linkedin\"),React.createElement(TwitterShareButton,{url:url},\"Twitter\"),React.createElement(EmailShareButton,{url:url},\"Email\")));if(!this.state.blogPosts[0].categories.includes(1)){if(this.state.comments.length===1){render.push(React.createElement(\"h4\",{key:\"bbbbart\"+9999},\"1 Comment\"));}else if(this.state.comments.length===0){render.push(React.createElement(\"h4\",{key:\"bbbart\"+9999},\"Be the first to leave a comment\"));}else{render.push(React.createElement(\"h4\",{key:\"bbart\"+9999},this.state.comments.length,\" Comments\"));}render.push(React.createElement(CommentPoster,{postID:this.state.postID,onUpdate:this.updateComments,key:9991,WPConfig:this.props.WPConfig,comments:this.state.comments}));var comments=[];parentComments.forEach(function(comment,index){var parentID=comment.id;var nestedComments=_this3.state.comments.filter(function(comment){return comment.parent===parentID;});comments.push(React.createElement(Comment,{comment:comment,index:index,key:index,onUpdate:_this3.updateComments,nestedComments:nestedComments,allComments:_this3.state.comments}));});render.push(React.createElement(\"div\",{className:\"comments-container\",key:9998},comments));}}else{render.push(React.createElement(Helmet,{key:\"123653\"},React.createElement(\"title\",null,\"H\\xE5kon Underbakke - Articles\"),React.createElement(\"meta\",{name:\"description\",content:\"Web development & design articles.\"})));}return React.createElement(React.Fragment,null,!this.state.loaded&&React.createElement(\"main\",{className:\"showLoading\"},React.createElement(Loader,null)),React.createElement(\"main\",{className:this.state.loaded?\"loaded\":\"loading\"},render));}}]);return Articles;}(React.Component);export default Articles;","map":{"version":3,"sources":["/Users/hakonunderbakke/Documents/GitHub/react-app-testing/Wordpress-REST-Blog/wordpress-rest-blog/src/components/Articles.js"],"names":["React","ReactDOMServer","Comment","CommentPoster","axios","Link","Helmet","Loader","FacebookShareButton","RedditShareButton","LinkedinShareButton","TwitterShareButton","EmailShareButton","HtmlToReactParser","require","Parser","Articles","state","blogPosts","id","title","rendered","excerpt","content","categories","comments","author_name","author_avatar_urls","date","name","sortArticles","postID","props","renderComments","commentEmail","commentName","commentContent","commentReply","checkForForm","form","document","querySelector","setAttribute","getAttribute","console","log","goToArticle","event","window","location","href","WPConfig","baseName","target","parentElement","categoryID","setState","scrollToTop","scrollTo","body","scrollTop","reactParse","parse","HTMLToReactParser","reactElement","string","renderToStaticMarkup","replace","parseDate","y","substring","m","d","h","min","updateComments","newCommentState","newComments","goToMusic","goToAbout","goToCV","open","goToContact","ignoreAction","preventDefault","goHome","get","siteURL","then","res","data","loaded","setTimeout","render","categoryItems","forEach","category","index","push","parseInt","blogPost","includes","length","className","__html","metaDescription","slice","parentComments","filter","comment","parent","url","parentID","nestedComments","Component"],"mappings":"skCAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,cAAP,KAA2B,kBAA3B,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CACA,MAAOC,CAAAA,aAAP,KAA0B,iBAA1B,CACA,MAAO,aAAP,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,MAAT,KAAuB,cAAvB,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CACA,OACEC,mBADF,CAEEC,iBAFF,CAGEC,mBAHF,CAIEC,kBAJF,CAKEC,gBALF,KAMO,aANP,CAOA,GAAMC,CAAAA,iBAAiB,CAAGC,OAAO,CAAC,eAAD,CAAP,CAAyBC,MAAnD,C,GAEMC,CAAAA,Q,mZACJC,K,CAAQ,CACNC,SAAS,CAAE,CACT,CACEC,EAAE,CAAE,CADN,CAEEC,KAAK,CAAE,CAAEC,QAAQ,CAAE,EAAZ,CAFT,CAGEC,OAAO,CAAE,CAAED,QAAQ,CAAE,EAAZ,CAHX,CAIEE,OAAO,CAAE,CAAEF,QAAQ,CAAE,EAAZ,CAJX,CAKEG,UAAU,CAAE,EALd,CADS,CADL,CAUNC,QAAQ,CAAE,CACR,CACEC,WAAW,CAAE,EADf,CAEEH,OAAO,CAAE,CAAEF,QAAQ,CAAE,EAAZ,CAFX,CAGEM,kBAAkB,CAAE,CAAE,GAAI,EAAN,CAHtB,CAIEC,IAAI,CAAE,EAJR,CADQ,CAVJ,CAkBNJ,UAAU,CAAE,CACV,CACEK,IAAI,CAAE,EADR,CAEEV,EAAE,CAAE,IAFN,CADU,CAlBN,CAwBNW,YAAY,CAAE,IAxBR,CAyBNC,MAAM,CAAE,MAAKC,KAAL,CAAWD,MAAX,EAAqB,KAzBvB,CA0BNE,cAAc,CAAE,KA1BV,CA2BNC,YAAY,CAAE,EA3BR,CA4BNC,WAAW,CAAE,EA5BP,CA6BNC,cAAc,CAAE,EA7BV,CA8BNC,YAAY,CAAE,IA9BR,C,OAkFRC,Y,CAAe,UAAM,CACnB,GAAIC,CAAAA,IAAI,CAAGC,QAAQ,CAACC,aAAT,CAAuB,eAAvB,CAAX,CACA,GAAIF,IAAI,GAAK,IAAb,CAAmB,CACjBA,IAAI,CAACG,YAAL,CACE,QADF,CAEE,uBAAyBH,IAAI,CAACI,YAAL,CAAkB,QAAlB,CAF3B,EAIAC,OAAO,CAACC,GAAR,CAAY,cAAZ,EACD,CACF,C,OACDC,W,CAAc,SAAAC,KAAK,CAAI,CACrBC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,WACE,MAAKlB,KAAL,CAAWmB,QAAX,CAAoBC,QADtB,iBAEQL,KAAK,CAACM,MAAN,CAAaC,aAAb,CAA2BX,YAA3B,CAAwC,SAAxC,CAFR,EAGD,C,OACDb,Y,CAAe,SAAAiB,KAAK,CAAI,CACtB,GAAIQ,CAAAA,UAAU,CAAGR,KAAK,CAACM,MAAN,CAAaV,YAAb,CAA0B,iBAA1B,CAAjB,CACA,MAAKa,QAAL,CAAc,CAAE1B,YAAY,CAAEyB,UAAhB,CAAd,EACA,MAAKE,WAAL,GACD,C,OACDA,W,CAAc,UAAM,CAClBT,MAAM,CAACU,QAAP,CAAgB,CAAhB,CAAmB,CAAnB,EACAlB,QAAQ,CAACmB,IAAT,CAAcC,SAAd,CAA0B,CAA1B,CACD,C,OACDC,U,CAAa,SAAAC,KAAK,CAAI,CACpB,GAAIC,CAAAA,iBAAiB,CAAG,GAAIlD,CAAAA,iBAAJ,EAAxB,CACA,GAAImD,CAAAA,YAAY,CAAGD,iBAAiB,CAACD,KAAlB,CAAwBA,KAAxB,CAAnB,CACA,GAAIG,CAAAA,MAAM,CAAGhE,cAAc,CAACiE,oBAAf,CAAoCF,YAApC,CAAb,CACA,MAAOC,CAAAA,MAAM,CAACE,OAAP,CAAe,QAAf,CAAyB,2BAAzB,CAAP,CACD,C,OACDC,S,CAAY,SAAAxC,IAAI,CAAI,CAClB,GAAIyC,CAAAA,CAAC,CAAGzC,IAAI,CAAC0C,SAAL,CAAe,CAAf,CAAkB,CAAlB,CAAR,CACA,GAAIC,CAAAA,CAAC,CAAG3C,IAAI,CAAC0C,SAAL,CAAe,CAAf,CAAkB,CAAlB,CAAR,CACA,GAAIE,CAAAA,CAAC,CAAG5C,IAAI,CAAC0C,SAAL,CAAe,CAAf,CAAkB,EAAlB,CAAR,CACA,GAAIG,CAAAA,CAAC,CAAG7C,IAAI,CAAC0C,SAAL,CAAe,EAAf,CAAmB,EAAnB,CAAR,CACA,GAAII,CAAAA,GAAG,CAAG9C,IAAI,CAAC0C,SAAL,CAAe,EAAf,CAAmB,EAAnB,CAAV,CACA,gBAAUG,CAAV,aAAeC,GAAf,aAAsBF,CAAtB,aAA2BD,CAA3B,aAAgCF,CAAhC,EACD,C,OACDM,c,CAAiB,SAAAC,eAAe,CAAI,CAClC,MAAKpB,QAAL,CAAc,CAAEqB,WAAW,CAAED,eAAf,CAAd,EACD,C,OACDE,S,CAAY,UAAM,CAChB9B,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuB,gBAAvB,CACD,C,OACD6B,S,CAAY,UAAM,CAChB/B,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuB,gBAAvB,CACD,C,OACD8B,M,CAAS,UAAM,CACbhC,MAAM,CAACiC,IAAP,CAAY,kCAAZ,CAAgD,QAAhD,EACD,C,OACDC,W,CAAc,UAAM,CAClBlC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuB,qCAAvB,CACD,C,OACDiC,Y,CAAe,SAAApC,KAAK,CAAI,CACtBA,KAAK,CAACqC,cAAN,GACD,C,OACDC,M,CAAS,UAAM,CACbrC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuB,WAAvB,CACD,C,iGA5GmB,iBAClB,GAAI,KAAKjC,KAAL,CAAWc,MAAX,GAAsB,KAA1B,CAAiC,CAC/B3B,KAAK,CACFkF,GADH,WACU,KAAKtD,KAAL,CAAWmB,QAAX,CAAoBoC,OAD9B,yBAEGC,IAFH,CAEQ,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAR,EAFX,EAGGF,IAHH,CAGQ,SAAAtE,SAAS,CAAI,CACjB,MAAI,CAACsC,QAAL,CAAc,CACZtC,SAAS,CAAEA,SADC,CAEZyE,MAAM,CAAE,IAFI,CAAd,EAID,CARH,EASAvF,KAAK,CACFkF,GADH,WACU,KAAKtD,KAAL,CAAWmB,QAAX,CAAoBoC,OAD9B,8BAEGC,IAFH,CAEQ,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAR,EAFX,EAGGF,IAHH,CAGQ,SAAAhE,UAAU,CAAI,CAClB,MAAI,CAACgC,QAAL,CAAc,CACZhC,UAAU,CAAEA,UADA,CAAd,EAGD,CAPH,EAQA,KAAKiC,WAAL,GACD,CAnBD,IAmBO,CACLrD,KAAK,CACFkF,GADH,WAEO,KAAKtD,KAAL,CAAWmB,QAAX,CAAoBoC,OAF3B,2CAEoE,KAAKtE,KAAL,CAAWc,MAF/E,GAIGyD,IAJH,CAIQ,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAR,EAJX,EAKGF,IALH,CAKQ,SAAAtE,SAAS,CAAI,CACjB,MAAI,CAACsC,QAAL,CACE,CACEtC,SAAS,CAAEA,SADb,CAEEyE,MAAM,CAAE,IAFV,CADF,CAKE,UAAM,CACJC,UAAU,CAAC,MAAI,CAACtD,YAAN,CAAoB,IAApB,CAAV,CACD,CAPH,EASD,CAfH,EAgBAlC,KAAK,CACFkF,GADH,WAEO,KAAKtD,KAAL,CAAWmB,QAAX,CAAoBoC,OAF3B,yCAEkE,KAAKtE,KAAL,CAAWc,MAF7E,GAIGyD,IAJH,CAIQ,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAR,EAJX,EAKGF,IALH,CAKQ,SAAA/D,QAAQ,CAAI,CAChB,MAAI,CAAC+B,QAAL,CAAc,CACZ/B,QAAQ,CAAEA,QADE,CAAd,EAGD,CATH,EAUA,KAAKgC,WAAL,GACD,CACF,C,uCA4DQ,iBACP,GAAIoC,CAAAA,MAAM,CAAG,EAAb,CACA,GAAIC,CAAAA,aAAa,CAAG,EAApB,CACA,KAAK7E,KAAL,CAAWO,UAAX,CAAsBuE,OAAtB,CAA8B,SAACC,QAAD,CAAWC,KAAX,CAAqB,CACjD,GAAID,QAAQ,CAAC7E,EAAT,GAAgB,CAApB,CAAuB,CACrB2E,aAAa,CAACI,IAAd,CACE,0BAAI,GAAG,CAAE,MAAQ,IAAR,CAAeD,KAAxB,CAA+B,UAASD,QAAQ,CAAC7E,EAAjD,EACE,8BACE,OAAO,CAAE,MAAI,CAACW,YADhB,CAEE,kBAAiBkE,QAAQ,CAAC7E,EAF5B,CAGE,SAAS,CACP,MAAI,CAACF,KAAL,CAAWa,YAAX,GAA4B,IAA5B,EACAqE,QAAQ,CAAC,MAAI,CAAClF,KAAL,CAAWa,YAAZ,CAAR,GAAsCqE,QAAQ,CAACH,QAAQ,CAAC7E,EAAV,CAD9C,CAEI,OAFJ,CAGI,MAPR,EAUG6E,QAAQ,CAACnE,IAVZ,CADF,CADF,EAgBD,CACF,CAnBD,EAoBA,GAAI,KAAKZ,KAAL,CAAWc,MAAX,GAAsB,KAA1B,CAAiC,CAC/B+D,aAAa,CAACI,IAAd,CACE,0BAAI,GAAG,CAAE,OAAS,IAAlB,EACE,oBAAC,IAAD,EAAM,EAAE,CAAC,WAAT,EACE,qDADF,CADF,CADF,EAOD,CAAC;;;;;SAMFL,MAAM,CAACK,IAAP,CACE,2BAAK,GAAG,CAAE,OAAS,IAAnB,EACE,8BACGJ,aADH,CADF,CADF,EAwCA,KAAK7E,KAAL,CAAWC,SAAX,CAAqB6E,OAArB,CAA6B,SAACK,QAAD,CAAWH,KAAX,CAAqB,CAChD,GACE,MAAI,CAAChF,KAAL,CAAWa,YAAX,GAA4B,IAA5B,EACAsE,QAAQ,CAAC5E,UAAT,CAAoB6E,QAApB,CAA6BF,QAAQ,CAAC,MAAI,CAAClF,KAAL,CAAWa,YAAZ,CAArC,CADA,EAEAsE,QAAQ,CAAC5E,UAAT,GAAwB2E,QAAQ,CAAC,MAAI,CAAClF,KAAL,CAAWa,YAAZ,CAHlC,CAIE,CACA,GAAIV,CAAAA,KAAK,CAAG,MAAI,CAACyC,UAAL,CAAgBuC,QAAQ,CAAChF,KAAT,CAAeC,QAA/B,CAAZ,CACA,GAAIsC,CAAAA,IAAI,CACN,MAAI,CAAC1C,KAAL,CAAWc,MAAX,GAAsB,KAAtB,CACI,MAAI,CAAC8B,UAAL,CAAgBuC,QAAQ,CAAC9E,OAAT,CAAiBD,QAAjC,CADJ,CAEI,MAAI,CAACwC,UAAL,CAAgBuC,QAAQ,CAAC7E,OAAT,CAAiBF,QAAjC,CAHN,CAIA,GAAI,MAAI,CAACJ,KAAL,CAAWc,MAAX,GAAsB,KAA1B,CAAiC,CAC/B4B,IAAI,CAAGA,IAAI,CAACW,SAAL,CAAe,CAAf,CAAkBX,IAAI,CAAC2C,MAAL,CAAc,CAAhC,EAAqC,SAA5C,CACD,CACD,GAAIC,CAAAA,SAAS,CAAG,MAAI,CAACtF,KAAL,CAAWc,MAAX,GAAsB,KAAtB,CAA8B,WAA9B,CAA4C,MAA5D,CACA;;;WAIA,GACG,MAAI,CAACd,KAAL,CAAWc,MAAX,GAAsB,KAAtB,EAA+B,CAACqE,QAAQ,CAAC5E,UAAT,CAAoB6E,QAApB,CAA6B,CAA7B,CAAjC,EACA,MAAI,CAACpF,KAAL,CAAWc,MAAX,GAAsB,KAFxB,CAGE,CACA8D,MAAM,CAACK,IAAP,CACE,+BAAS,GAAG,CAAED,KAAd,CAAqB,SAAS,CAAEM,SAAhC,CAA2C,UAASH,QAAQ,CAACjF,EAA7D,EACE,oBAAC,IAAD,EACE,EAAE,CAAE,kBAAoBiF,QAAQ,CAACjF,EADnC,CAEE,UAASiF,QAAQ,CAACjF,EAFpB,CAGE,SAAS,CAAC,aAHZ,EAKE,0BACE,UAASiF,QAAQ,CAACjF,EADpB,CAEE,uBAAuB,CAAE,CACvBqF,MAAM,CAAEpF,KADe,CAF3B,EALF,CADF,CAaG,MAAI,CAACH,KAAL,CAAWc,MAAX,GAAsB,KAAtB,CACC,oBAAC,IAAD,EACE,EAAE,CAAE,kBAAoBqE,QAAQ,CAACjF,EADnC,CAEE,UAASiF,QAAQ,CAACjF,EAFpB,CAGE,SAAS,CAAC,iBAHZ,EAKE,2BACE,SAAS,CAAC,MADZ,CAEE,UAASiF,QAAQ,CAACjF,EAFpB,CAGE,uBAAuB,CAAE,CACvBqF,MAAM,CAAE7C,IADe,CAH3B,EALF,CADD,CAeC,2BACE,SAAS,CAAC,MADZ,CAEE,OAAO,CACL,MAAI,CAAC1C,KAAL,CAAWc,MAAX,GAAsB,KAAtB,CAA8B,MAAI,CAACe,WAAnC,CAAiD,UAAM,CAAE,CAH7D,CAKE,UAASsD,QAAQ,CAACjF,EALpB,CAME,uBAAuB,CAAE,CACvBqF,MAAM,CAAE7C,IADe,CAN3B,EA5BJ,CADF,EA0CD,CACF,CACF,CAnED,EAoEA,GAAI,KAAK1C,KAAL,CAAWc,MAAX,GAAsB,KAA1B,CAAiC,CAC/B;AACA,GAAI,KAAKd,KAAL,CAAWC,SAAX,CAAqB,CAArB,EAAwBE,KAAxB,CAA8BC,QAA9B,GAA2C,EAA/C,CAAmD,CACjD,GAAIoF,CAAAA,eAAe,CAAG,KAAK5C,UAAL,CACpB,KAAK5C,KAAL,CAAWC,SAAX,CAAqB,CAArB,EAAwBI,OAAxB,CAAgCD,QADZ,CAAtB,CAGAoF,eAAe,CAAGA,eAAe,CAACnC,SAAhB,CAA0B,CAA1B,CAAlB,CACAmC,eAAe,CAAGA,eAAe,CAACC,KAAhB,CAAsB,CAAtB,CAAyB,CAAC,CAA1B,CAAlB,CACA,GAAItF,CAAAA,KAAK,CAAG,KAAKyC,UAAL,CAAgB,KAAK5C,KAAL,CAAWC,SAAX,CAAqB,CAArB,EAAwBE,KAAxB,CAA8BC,QAA9C,CAAZ,CACAwE,MAAM,CAACK,IAAP,CACE,oBAAC,MAAD,EAAQ,GAAG,CAAC,QAAZ,EACE,iCAAQ9E,KAAR,CADF,CAEE,4BAAM,IAAI,CAAC,aAAX,CAAyB,OAAO,CAAEqF,eAAlC,EAFF,CADF,EAMD,CACD,GAAIE,CAAAA,cAAc,CAAG,KAAK1F,KAAL,CAAWQ,QAAX,CAAoBmF,MAApB,CACnB,SAAAC,OAAO,QAAIA,CAAAA,OAAO,CAACC,MAAR,GAAmB,CAAvB,EADY,CAArB,CAGA,GAAIC,CAAAA,GAAG,CAAG/D,MAAM,CAACC,QAAP,CAAgBC,IAA1B,CACA2C,MAAM,CAACK,IAAP,CAAY,0BAAI,GAAG,CAAE,QAAU,IAAnB,gBAAZ,EACAL,MAAM,CAACK,IAAP,CACE,2BAAK,SAAS,CAAC,QAAf,CAAwB,GAAG,CAAE,OAAS,IAAtC,EACE,oBAAC,mBAAD,EAAqB,GAAG,CAAEa,GAA1B,aADF,CAEE,oBAAC,iBAAD,EAAmB,GAAG,CAAEA,GAAxB,WAFF,CAGE,oBAAC,mBAAD,EAAqB,GAAG,CAAEA,GAA1B,aAHF,CAIE,oBAAC,kBAAD,EAAoB,GAAG,CAAEA,GAAzB,YAJF,CAKE,oBAAC,gBAAD,EAAkB,GAAG,CAAEA,GAAvB,UALF,CADF,EASA,GAAI,CAAC,KAAK9F,KAAL,CAAWC,SAAX,CAAqB,CAArB,EAAwBM,UAAxB,CAAmC6E,QAAnC,CAA4C,CAA5C,CAAL,CAAqD,CACnD,GAAI,KAAKpF,KAAL,CAAWQ,QAAX,CAAoB6E,MAApB,GAA+B,CAAnC,CAAsC,CACpCT,MAAM,CAACK,IAAP,CAAY,0BAAI,GAAG,CAAE,UAAY,IAArB,cAAZ,EACD,CAFD,IAEO,IAAI,KAAKjF,KAAL,CAAWQ,QAAX,CAAoB6E,MAApB,GAA+B,CAAnC,CAAsC,CAC3CT,MAAM,CAACK,IAAP,CACE,0BAAI,GAAG,CAAE,SAAW,IAApB,oCADF,EAGD,CAJM,IAIA,CACLL,MAAM,CAACK,IAAP,CACE,0BAAI,GAAG,CAAE,QAAU,IAAnB,EAA0B,KAAKjF,KAAL,CAAWQ,QAAX,CAAoB6E,MAA9C,aADF,EAGD,CACDT,MAAM,CAACK,IAAP,CACE,oBAAC,aAAD,EACE,MAAM,CAAE,KAAKjF,KAAL,CAAWc,MADrB,CAEE,QAAQ,CAAE,KAAK4C,cAFjB,CAGE,GAAG,CAAE,IAHP,CAIE,QAAQ,CAAE,KAAK3C,KAAL,CAAWmB,QAJvB,CAKE,QAAQ,CAAE,KAAKlC,KAAL,CAAWQ,QALvB,EADF,EASA,GAAIA,CAAAA,QAAQ,CAAG,EAAf,CACAkF,cAAc,CAACZ,OAAf,CAAuB,SAACc,OAAD,CAAUZ,KAAV,CAAoB,CACzC,GAAIe,CAAAA,QAAQ,CAAGH,OAAO,CAAC1F,EAAvB,CACA,GAAI8F,CAAAA,cAAc,CAAG,MAAI,CAAChG,KAAL,CAAWQ,QAAX,CAAoBmF,MAApB,CACnB,SAAAC,OAAO,QAAIA,CAAAA,OAAO,CAACC,MAAR,GAAmBE,QAAvB,EADY,CAArB,CAGAvF,QAAQ,CAACyE,IAAT,CACE,oBAAC,OAAD,EACE,OAAO,CAAEW,OADX,CAEE,KAAK,CAAEZ,KAFT,CAGE,GAAG,CAAEA,KAHP,CAIE,QAAQ,CAAE,MAAI,CAACtB,cAJjB,CAKE,cAAc,CAAEsC,cALlB,CAME,WAAW,CAAE,MAAI,CAAChG,KAAL,CAAWQ,QAN1B,EADF,EAUD,CAfD,EAgBAoE,MAAM,CAACK,IAAP,CACE,2BAAK,SAAS,CAAC,oBAAf,CAAoC,GAAG,CAAE,IAAzC,EACGzE,QADH,CADF,EAKD,CACF,CA1ED,IA0EO,CACLoE,MAAM,CAACK,IAAP,CACE,oBAAC,MAAD,EAAQ,GAAG,CAAC,QAAZ,EACE,kEADF,CAEE,4BACE,IAAI,CAAC,aADP,CAEE,OAAO,CAAE,oCAFX,EAFF,CADF,EASD,CACD,MACE,qBAAC,KAAD,CAAO,QAAP,MACG,CAAC,KAAKjF,KAAL,CAAW0E,MAAZ,EACC,4BAAM,SAAS,CAAC,aAAhB,EACE,oBAAC,MAAD,MADF,CAFJ,CAME,4BAAM,SAAS,CAAE,KAAK1E,KAAL,CAAW0E,MAAX,CAAoB,QAApB,CAA+B,SAAhD,EACGE,MADH,CANF,CADF,CAYD,C,sBAhYoB7F,KAAK,CAACkH,S,EAmY7B,cAAelG,CAAAA,QAAf","sourcesContent":["import React from \"react\";\nimport ReactDOMServer from \"react-dom/server\";\nimport Comment from \"./Comment\";\nimport CommentPoster from \"./CommentPoster\";\nimport \"../App.scss\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\nimport { Helmet } from \"react-helmet\";\nimport Loader from \"./Loader\";\nimport {\n  FacebookShareButton,\n  RedditShareButton,\n  LinkedinShareButton,\n  TwitterShareButton,\n  EmailShareButton\n} from \"react-share\";\nconst HtmlToReactParser = require(\"html-to-react\").Parser;\n\nclass Articles extends React.Component {\n  state = {\n    blogPosts: [\n      {\n        id: 0,\n        title: { rendered: \"\" },\n        excerpt: { rendered: \"\" },\n        content: { rendered: \"\" },\n        categories: []\n      }\n    ],\n    comments: [\n      {\n        author_name: \"\",\n        content: { rendered: \"\" },\n        author_avatar_urls: { 48: \"\" },\n        date: \"\"\n      }\n    ],\n    categories: [\n      {\n        name: \"\",\n        id: null\n      }\n    ],\n    sortArticles: null,\n    postID: this.props.postID || false,\n    renderComments: false,\n    commentEmail: \"\",\n    commentName: \"\",\n    commentContent: \"\",\n    commentReply: null\n  };\n  componentDidMount() {\n    if (this.state.postID === false) {\n      axios\n        .get(`${this.props.WPConfig.siteURL}wp-json/wp/v2/posts`)\n        .then(res => res.data)\n        .then(blogPosts => {\n          this.setState({\n            blogPosts: blogPosts,\n            loaded: true\n          });\n        });\n      axios\n        .get(`${this.props.WPConfig.siteURL}wp-json/wp/v2/categories`)\n        .then(res => res.data)\n        .then(categories => {\n          this.setState({\n            categories: categories\n          });\n        });\n      this.scrollToTop();\n    } else {\n      axios\n        .get(\n          `${this.props.WPConfig.siteURL}wp-json/wp/v2/posts/?include[]=${this.state.postID}`\n        )\n        .then(res => res.data)\n        .then(blogPosts => {\n          this.setState(\n            {\n              blogPosts: blogPosts,\n              loaded: true\n            },\n            () => {\n              setTimeout(this.checkForForm, 1500);\n            }\n          );\n        });\n      axios\n        .get(\n          `${this.props.WPConfig.siteURL}wp-json/wp/v2/comments/?post=${this.state.postID}`\n        )\n        .then(res => res.data)\n        .then(comments => {\n          this.setState({\n            comments: comments\n          });\n        });\n      this.scrollToTop();\n    }\n  }\n  checkForForm = () => {\n    let form = document.querySelector(\".wpforms-form\");\n    if (form !== null) {\n      form.setAttribute(\n        \"action\",\n        \"https://impedans.me/\" + form.getAttribute(\"action\")\n      );\n      console.log(\"Updated form\");\n    }\n  };\n  goToArticle = event => {\n    window.location.href = `${\n      this.props.WPConfig.baseName\n    }post/${event.target.parentElement.getAttribute(\"data-id\")}`;\n  };\n  sortArticles = event => {\n    let categoryID = event.target.getAttribute(\"data-categoryid\");\n    this.setState({ sortArticles: categoryID });\n    this.scrollToTop();\n  };\n  scrollToTop = () => {\n    window.scrollTo(0, 0);\n    document.body.scrollTop = 0;\n  };\n  reactParse = parse => {\n    let HTMLToReactParser = new HtmlToReactParser();\n    let reactElement = HTMLToReactParser.parse(parse);\n    let string = ReactDOMServer.renderToStaticMarkup(reactElement);\n    return string.replace(\"<code>\", \"<code class='markUpBaby'>\");\n  };\n  parseDate = date => {\n    let y = date.substring(0, 4);\n    let m = date.substring(5, 7);\n    let d = date.substring(8, 10);\n    let h = date.substring(11, 13);\n    let min = date.substring(14, 16);\n    return `${h}:${min} ${d}/${m}/${y}`;\n  };\n  updateComments = newCommentState => {\n    this.setState({ newComments: newCommentState });\n  };\n  goToMusic = () => {\n    window.location.href = \"/blog/post/128\";\n  };\n  goToAbout = () => {\n    window.location.href = \"/blog/post/136\";\n  };\n  goToCV = () => {\n    window.open(\"https://haakon.underbakke.net/cv\", \"_blank\");\n  };\n  goToContact = () => {\n    window.location.href = \"https://impedans.me/web/contact-me/\";\n  };\n  ignoreAction = event => {\n    event.preventDefault();\n  };\n  goHome = () => {\n    window.location.href = \"/articles\";\n  };\n  render() {\n    let render = [];\n    let categoryItems = [];\n    this.state.categories.forEach((category, index) => {\n      if (category.id !== 1) {\n        categoryItems.push(\n          <li key={\"art\" + 1888 + index} data-id={category.id}>\n            <button\n              onClick={this.sortArticles}\n              data-categoryid={category.id}\n              className={\n                this.state.sortArticles === null ||\n                parseInt(this.state.sortArticles) === parseInt(category.id)\n                  ? \"white\"\n                  : \"gray\"\n              }\n            >\n              {category.name}\n            </button>\n          </li>\n        );\n      }\n    });\n    if (this.state.postID !== false) {\n      categoryItems.push(\n        <li key={\"fart\" + 1923}>\n          <Link to=\"/articles\">\n            <button>&#8249; All posts</button>\n          </Link>\n        </li>\n      );\n    } /* \n    categoryItems.push(\n      <li key={\"bart\" + 1923} className=\"seperator\">\n        |\n      </li>\n    ); */\n    render.push(\n      <nav key={\"part\" + 9991}>\n        <ul>\n          {categoryItems}\n          {/* \n          <li>\n            <Link to=\"/post/128\">\n              <button\n                onClick={\n                  this.state.postID !== false\n                    ? this.goToMusic\n                    : this.ignoreAction\n                }\n              >\n                Music\n              </button>\n            </Link>\n          </li>\n          <li>\n            <Link to=\"/post/136\">\n              <button\n                onClick={\n                  this.state.postID !== false\n                    ? this.goToAbout\n                    : this.ignoreAction\n                }\n              >\n                About\n              </button>\n            </Link>\n          </li>\n          <li>\n            <button onClick={this.goToContact}>Contact</button>\n          </li>\n          <li>\n            <button onClick={this.goToCV}>CV</button>\n          </li> */}\n        </ul>\n      </nav>\n    );\n    this.state.blogPosts.forEach((blogPost, index) => {\n      if (\n        this.state.sortArticles === null ||\n        blogPost.categories.includes(parseInt(this.state.sortArticles)) ||\n        blogPost.categories === parseInt(this.state.sortArticles)\n      ) {\n        let title = this.reactParse(blogPost.title.rendered);\n        let body =\n          this.state.postID === false\n            ? this.reactParse(blogPost.excerpt.rendered)\n            : this.reactParse(blogPost.content.rendered);\n        if (this.state.postID === false) {\n          body = body.substring(0, body.length - 9) + \"...</p>\";\n        }\n        let className = this.state.postID === false ? \"collapsed\" : \"open\";\n        /*if (index === 0 && this.state.sortArticles === null) {\n          className = \"open\"; // Latest article should be open on index\n          body = this.reactParse(blogPost.content.rendered);\n        }*/\n        if (\n          (this.state.postID === false && !blogPost.categories.includes(1)) ||\n          this.state.postID !== false\n        ) {\n          render.push(\n            <article key={index} className={className} data-id={blogPost.id}>\n              <Link\n                to={\"/articles/post/\" + blogPost.id}\n                data-id={blogPost.id}\n                className=\"articleLink\"\n              >\n                <h3\n                  data-id={blogPost.id}\n                  dangerouslySetInnerHTML={{\n                    __html: title\n                  }}\n                ></h3>\n              </Link>\n              {this.state.postID === false ? (\n                <Link\n                  to={\"/articles/post/\" + blogPost.id}\n                  data-id={blogPost.id}\n                  className=\"articleBodyLink\"\n                >\n                  <div\n                    className=\"body\"\n                    data-id={blogPost.id}\n                    dangerouslySetInnerHTML={{\n                      __html: body\n                    }}\n                  ></div>\n                </Link>\n              ) : (\n                <div\n                  className=\"body\"\n                  onClick={\n                    this.state.postID === false ? this.goToArticle : () => {}\n                  }\n                  data-id={blogPost.id}\n                  dangerouslySetInnerHTML={{\n                    __html: body\n                  }}\n                ></div>\n              )}\n            </article>\n          );\n        }\n      }\n    });\n    if (this.state.postID !== false) {\n      // A specific post is open\n      if (this.state.blogPosts[0].title.rendered !== \"\") {\n        let metaDescription = this.reactParse(\n          this.state.blogPosts[0].excerpt.rendered\n        );\n        metaDescription = metaDescription.substring(3);\n        metaDescription = metaDescription.slice(0, -5);\n        let title = this.reactParse(this.state.blogPosts[0].title.rendered);\n        render.push(\n          <Helmet key=\"123653\">\n            <title>{title}</title>\n            <meta name=\"description\" content={metaDescription} />\n          </Helmet>\n        );\n      }\n      let parentComments = this.state.comments.filter(\n        comment => comment.parent === 0\n      );\n      let url = window.location.href;\n      render.push(<h5 key={\"aaart\" + 9994}>Share on...</h5>);\n      render.push(\n        <div className=\"social\" key={\"arts\" + 9993}>\n          <FacebookShareButton url={url}>Facebook</FacebookShareButton>\n          <RedditShareButton url={url}>Reddit</RedditShareButton>\n          <LinkedinShareButton url={url}>Linkedin</LinkedinShareButton>\n          <TwitterShareButton url={url}>Twitter</TwitterShareButton>\n          <EmailShareButton url={url}>Email</EmailShareButton>\n        </div>\n      );\n      if (!this.state.blogPosts[0].categories.includes(1)) {\n        if (this.state.comments.length === 1) {\n          render.push(<h4 key={\"bbbbart\" + 9999}>1 Comment</h4>);\n        } else if (this.state.comments.length === 0) {\n          render.push(\n            <h4 key={\"bbbart\" + 9999}>Be the first to leave a comment</h4>\n          );\n        } else {\n          render.push(\n            <h4 key={\"bbart\" + 9999}>{this.state.comments.length} Comments</h4>\n          );\n        }\n        render.push(\n          <CommentPoster\n            postID={this.state.postID}\n            onUpdate={this.updateComments}\n            key={9991}\n            WPConfig={this.props.WPConfig}\n            comments={this.state.comments}\n          />\n        );\n        let comments = [];\n        parentComments.forEach((comment, index) => {\n          let parentID = comment.id;\n          let nestedComments = this.state.comments.filter(\n            comment => comment.parent === parentID\n          );\n          comments.push(\n            <Comment\n              comment={comment}\n              index={index}\n              key={index}\n              onUpdate={this.updateComments}\n              nestedComments={nestedComments}\n              allComments={this.state.comments}\n            />\n          );\n        });\n        render.push(\n          <div className=\"comments-container\" key={9998}>\n            {comments}\n          </div>\n        );\n      }\n    } else {\n      render.push(\n        <Helmet key=\"123653\">\n          <title>HÃ¥kon Underbakke - Articles</title>\n          <meta\n            name=\"description\"\n            content={\"Web development & design articles.\"}\n          />\n        </Helmet>\n      );\n    }\n    return (\n      <React.Fragment>\n        {!this.state.loaded && (\n          <main className=\"showLoading\">\n            <Loader />\n          </main>\n        )}\n        <main className={this.state.loaded ? \"loaded\" : \"loading\"}>\n          {render}\n        </main>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default Articles;\n"]},"metadata":{},"sourceType":"module"}